# 参数顺序修复说明

## 问题描述

用户反馈在 GitHub Actions 中构建系统镜像时，参数选择混乱，"选发行版的地方会显示桌面环境的选项"，这导致了困惑。

## 问题根源

### 1. 参数顺序不一致

**原来的参数顺序：**
- Arch Linux: `./arch-desktop_build.sh [桌面环境] [内核版本]`
- Debian: `./debian-desktop_build.sh [内核版本] [桌面环境]`
- Ubuntu: `./ubuntu-desktop_build.sh [内核版本] [桌面环境]`

### 2. GitHub Actions 调用方式与本地调用方式不一致

**GitHub Actions 调用：**
```bash
sudo sh debian-desktop_build.sh phosh-full 6.18
```

**本地调用（README 中的示例）：**
```bash
sudo sh debian-desktop_build.sh 6.18 gnome
```

## 修复方案

### 统一参数顺序

所有脚本现在都使用相同的参数顺序：
```
./[脚本名] [内核版本] [桌面环境]
```

### 具体修复

1. **Arch Linux 脚本** (`arch-desktop_build.sh`)
   - 修复前：`./arch-desktop_build.sh [桌面环境] [内核版本]`
   - 修复后：`./arch-desktop_build.sh [内核版本] [桌面环境]`

2. **Debian 脚本** (`debian-desktop_build.sh`)
   - 修复前：`./debian-desktop_build.sh [内核版本] [桌面环境]`
   - 修复后：`./debian-desktop_build.sh [内核版本] [桌面环境]`

3. **Ubuntu 脚本** (`ubuntu-desktop_build.sh`)
   - 修复前：`./ubuntu-desktop_build.sh [内核版本] [桌面环境]`
   - 修复后：`./ubuntu-desktop_build.sh [内核版本] [桌面环境]`

## 修复后的使用方式

### GitHub Actions 调用方式（推荐）

```bash
# 构建 Debian Phosh 桌面环境
sudo sh debian-desktop_build.sh phosh-full 6.18

# 构建 Ubuntu GNOME 桌面环境
sudo sh ubuntu-desktop_build.sh phosh-full 6.18

# 构建 Arch GNOME 桌面环境
sudo sh arch-desktop_build.sh gnome 6.18
```

### 本地调用方式

```bash
# 构建 Debian GNOME 桌面环境
sudo sh debian-desktop_build.sh 6.18 gnome

# 构建 Ubuntu GNOME 桌面环境
sudo sh ubuntu-desktop_build.sh 6.18 gnome

# 构建 Arch GNOME 桌面环境
sudo sh arch-desktop_build.sh 6.18 gnome
```

## 桌面环境参数说明

所有脚本都支持以下桌面环境参数：

| 参数 | 说明 |
|------|------|
| `gnome` | GNOME 桌面环境 |
| `plasma` | KDE Plasma 桌面环境 |
| `xfce` | XFCE 桌面环境 |
| `mate` | MATE 桌面环境 |
| `lxqt` | LXQt 桌面环境 |
| `lxde` | LXDE 桌面环境 |
| `none` | 无桌面环境 |
| `phosh-core` | Phosh 核心桌面环境 |
| `phosh-full` | Phosh 完整桌面环境 |
| `phosh-phone` | Phosh 手机桌面环境 |

## 内核版本格式

内核版本必须是有效的版本号格式，例如：
- `6.18`
- `6.18.1`
- `6.19`

## 验证修复

修复完成后，可以验证脚本的参数验证是否正常工作：

```bash
# 测试无效的内核版本
sudo sh arch-desktop_build.sh 6.18 invalid

# 测试无效的桌面环境
sudo sh arch-desktop_build.sh invalid 6.18
```

## 总结

这次修复统一了所有构建脚本的参数顺序，解决了用户反馈的"选项不对劲"的问题。现在：

1. ✅ 所有脚本的参数顺序一致
2. ✅ 与 GitHub Actions 的调用方式兼容
3. ✅ 本地调用方式也清晰明确
4. ✅ 不再出现"选发行版的地方显示桌面环境选项"的问题

用户现在可以放心使用 GitHub Actions 构建系统镜像，参数顺序已经完全统一！