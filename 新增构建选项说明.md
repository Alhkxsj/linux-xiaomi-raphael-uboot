# 新增构建选项说明

本项目已成功为Ubuntu和Debian系统添加了新的构建选项，现在支持以下8种构建类型：

## 新增的构建选项

### Ubuntu 系统
1. **ubuntu-minimal** - Ubuntu 无桌面环境最小化版本
   - 系统大小：2GB
   - 特点：最小化安装，仅包含基础命令行工具和SSH服务器
   - 适用场景：资源受限环境、服务器部署

2. **ubuntu-official-desktop** - Ubuntu 官方桌面环境版本
   - 系统大小：8GB
   - 特点：使用官方GNOME桌面环境，提供完整的桌面体验
   - 适用场景：需要完整桌面环境的用户

### Debian 系统
1. **debian-minimal** - Debian 无桌面环境最小化版本
   - 系统大小：2GB
   - 特点：最小化安装，仅包含基础命令行工具和SSH服务器
   - 适用场景：资源受限环境、服务器部署

2. **debian-official-desktop** - Debian 官方桌面环境版本
   - 系统大小：8GB
   - 特点：使用官方GNOME桌面环境，提供完整的桌面体验
   - 适用场景：需要完整桌面环境的用户

## 保留的原有构建选项

- **debian-desktop** - Debian Phosh桌面环境版本
- **debian-server** - Debian 服务器版本
- **ubuntu-desktop** - Ubuntu Phosh桌面环境版本
- **ubuntu-server** - Ubuntu 服务器版本
- **arch-desktop** - Arch Linux 桌面版本
- **arch-server** - Arch Linux 服务器版本

## 使用方法

### 本地构建
```bash
# Ubuntu 最小化版本
sudo sh ubuntu-minimal_build.sh 6.18

# Ubuntu 官方桌面版本
sudo sh ubuntu-official-desktop_build.sh phosh-full 6.18

# Debian 最小化版本
sudo sh debian-minimal_build.sh 6.18

# Debian 官方桌面版本
sudo sh debian-official-desktop_build.sh phosh-full 6.18
```

### GitHub Actions 构建
在GitHub Actions界面中选择新的系统类型选项，即可构建对应的镜像。

## 构建脚本说明

新增的构建脚本都遵循与原有脚本相同的架构模式：

1. **依赖检查**：验证必要的工具是否已安装
2. **系统创建**：使用debootstrap创建最小化系统
3. **内核配置**：安装小米Raphael设备专用内核包
4. **设备适配**：配置USB NCM、网络管理等设备功能
5. **用户配置**：设置默认用户和权限
6. **镜像打包**：生成可刷入设备的rootfs镜像

## 注意事项

1. 新增的最小化版本系统大小为2GB，适合资源受限环境
2. 新增的官方桌面版本系统大小为8GB，提供完整的桌面体验
3. 所有新构建选项都保留了原有的设备适配和网络功能
4. 在GitHub Actions中构建时，桌面版本需要选择桌面环境参数
5. 内核版本号需要与已构建的内核版本匹配

## 文件列表

新增的构建脚本文件：
- `ubuntu-minimal_build.sh`
- `ubuntu-official-desktop_build.sh`
- `debian-minimal_build.sh`
- `debian-official-desktop_build.sh`

更新的配置文件：
- `.github/workflows/构建rootfs镜像.yaml`

这些新增的构建选项为用户提供了更多选择，可以根据具体需求选择最适合的系统版本。